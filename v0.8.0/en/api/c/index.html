<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nux C API: C API of NPU Engine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Nux C API<span id="projectnumber">&#160;0.0.1</span>
   </div>
   <div id="projectbrief">C API of NPU Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">C API of NPU Engine </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a>Nux is the C API library of the NPU Engine. Nux provides the two kinds of execution ways to run inference tasks through NPU. The followings demonstrate the examples of two execution ways. If you want to see more details about API types and functions, please refer to <a class="el" href="nux_8h.html">nux.h</a>.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Sync Model</h2>
<p >The sync model provides APIs to run a single inference task with a single input batch at a time.</p>
<h3><a class="anchor" id="autotoc_md2"></a>
Example of Sync Model</h3>
<div class="fragment"><div class="line"><span class="comment">// Get the size of ENF file</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *enf_path = <span class="stringliteral">&quot;&lt;a path of ENF file&gt;&quot;</span>;</div>
<div class="line"><span class="keyword">struct </span>stat st;</div>
<div class="line">stat(enf_path, &amp;st);</div>
<div class="line"><span class="keywordtype">size_t</span> enf_size = st.st_size;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read the ENF binary from the ENF file</span></div>
<div class="line"><span class="keywordtype">void</span> *enf_buf = malloc(enf_size);</div>
<div class="line">FILE *enf_file = fopen(enf_path, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> read_item = fread(enf_buf, enf_size, 1, enf_file);</div>
<div class="line">assert(read_item == 1);</div>
<div class="line">fclose(enf_file);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Initialize nux handle</span></div>
<div class="line"><a class="code hl_typedef" href="nux_8h.html#a8aaa845d62c8e2ba0b08492ad4312b4a">nux_handle_t</a> nux = NULL;</div>
<div class="line">assert(<a class="code hl_function" href="nux_8h.html#ae68b58f43d3a93f6edf9d0c0bea56e6b">create_nux</a>(&amp;nux) == <a class="code hl_enumvalue" href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a">nux_error_t_success</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a sync model</span></div>
<div class="line"><a class="code hl_typedef" href="nux_8h.html#a2658304913df93888e11892bc40ea34f">nux_sync_model_t</a> sync_model = NULL;</div>
<div class="line">assert(<a class="code hl_function" href="nux_8h.html#a0a8c9bb5290414fa8c50a4225a41cd68">nux_create_sync_model</a>(nux, binary_buf, enf_size, &amp;sync_model) == <a class="code hl_enumvalue" href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a">nux_error_t_success</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get the 0th input tensor from this model, and </span></div>
<div class="line"><span class="comment">// A model can have more than one input tensor depending on its model design.</span></div>
<div class="line"><span class="comment">// You can specify an index of input tensor to get your desired input tensor. </span></div>
<div class="line"><a class="code hl_typedef" href="nux_8h.html#a94b4b218d26fecf1b1a4e3b102484b4c">nux_tensor_t</a> input_tensor = NULL;</div>
<div class="line">assert(<a class="code hl_function" href="nux_8h.html#a80b727e0c054b2db830808b882f68305">model_input_tensor</a>(sync_model, 0, &amp;input_tensor) == <a class="code hl_enumvalue" href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a">nux_error_t_success</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Fill the buffer of the input tensor with your data</span></div>
<div class="line"><span class="comment">// Here, the input shape of the 0th input tensor is 1x28x28x1 in NxHxWxC, </span></div>
<div class="line"><span class="comment">// and it has totally 784 elements. In this example, the buffer is filled with a fake data. </span></div>
<div class="line">uint8_t input_buf [784] = {[0 ... 783] = 1};</div>
<div class="line"><a class="code hl_function" href="nux_8h.html#a3139df500cc7640a1516cafae8f3818d">tensor_set_buffer</a>(input_tensor, input_buf, 784);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get the 0th output tensor from the model</span></div>
<div class="line"><a class="code hl_typedef" href="nux_8h.html#a94b4b218d26fecf1b1a4e3b102484b4c">nux_tensor_t</a> output_tensor = NULL;</div>
<div class="line">assert(<a class="code hl_function" href="nux_8h.html#af8a884f8271dddc703f18103a56157ba">model_output_tensor</a>(sync_model, 0, &amp;output_tensor) == <a class="code hl_enumvalue" href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a">nux_error_t_success</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Run an inference task with the input data filled as above.</span></div>
<div class="line">assert(<a class="code hl_function" href="nux_8h.html#aeb9dee222b8b07f4ae10e6e32b99301f">model_run</a>(sync_model) == <a class="code hl_enumvalue" href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a">nux_error_t_success</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get the buffer of the 0th&#39;s output tensor.</span></div>
<div class="line"><span class="comment">// output_buf will receive a pointer to the output tensor&#39;s buffer.</span></div>
<div class="line"><span class="comment">// output_len will receive the length of the output buffer.</span></div>
<div class="line">uint8_t *output_buf = NULL;</div>
<div class="line">uintptr_t output_len = NULL;</div>
<div class="line"><a class="code hl_function" href="nux_8h.html#ac300486348c761b9bfa20cf614d06dca">tensor_get_buffer</a>(output_tensor, &amp;output_buf, &amp;output_len);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Release resources</span></div>
<div class="line"><a class="code hl_function" href="nux_8h.html#a0f6a635eb4e6076213dceb64df4d03bc">destroy_sync_model</a>(sync_model);</div>
<div class="line"><a class="code hl_function" href="nux_8h.html#af85121c378e53e7c270015a79c0af782">destroy_nux</a>(nux);</div>
<div class="ttc" id="anux_8h_html_a0a8c9bb5290414fa8c50a4225a41cd68"><div class="ttname"><a href="nux_8h.html#a0a8c9bb5290414fa8c50a4225a41cd68">nux_create_sync_model</a></div><div class="ttdeci">enum nux_error_t nux_create_sync_model(nux_handle_t nux, const uint8_t *buffer, nux_buffer_len_t len, nux_sync_model_t *model)</div><div class="ttdoc">Create an instance of a synchronous model.</div></div>
<div class="ttc" id="anux_8h_html_a0f6a635eb4e6076213dceb64df4d03bc"><div class="ttname"><a href="nux_8h.html#a0f6a635eb4e6076213dceb64df4d03bc">destroy_sync_model</a></div><div class="ttdeci">void destroy_sync_model(nux_sync_model_t model)</div><div class="ttdoc">Destroy the sync model and release its resources.</div></div>
<div class="ttc" id="anux_8h_html_a2658304913df93888e11892bc40ea34f"><div class="ttname"><a href="nux_8h.html#a2658304913df93888e11892bc40ea34f">nux_sync_model_t</a></div><div class="ttdeci">struct Model * nux_sync_model_t</div><div class="ttdoc">Handle of a synchronous model.</div><div class="ttdef"><b>Definition:</b> nux.h:236</div></div>
<div class="ttc" id="anux_8h_html_a3139df500cc7640a1516cafae8f3818d"><div class="ttname"><a href="nux_8h.html#a3139df500cc7640a1516cafae8f3818d">tensor_set_buffer</a></div><div class="ttdeci">enum nux_error_t tensor_set_buffer(nux_tensor_t tensor, nux_buffer_t buffer, nux_buffer_len_t len, void(*free)(uint8_t *, uintptr_t))</div><div class="ttdoc">Specify a pointer to a data buffer to a specified input tensor.</div></div>
<div class="ttc" id="anux_8h_html_a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a"><div class="ttname"><a href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a">nux_error_t_success</a></div><div class="ttdeci">@ nux_error_t_success</div><div class="ttdef"><b>Definition:</b> nux.h:52</div></div>
<div class="ttc" id="anux_8h_html_a80b727e0c054b2db830808b882f68305"><div class="ttname"><a href="nux_8h.html#a80b727e0c054b2db830808b882f68305">model_input_tensor</a></div><div class="ttdeci">enum nux_error_t model_input_tensor(nux_sync_model_t model, uint32_t index, nux_tensor_t *tensor)</div><div class="ttdoc">Get the handle of a specified input tensor from a given sync model.</div></div>
<div class="ttc" id="anux_8h_html_a8aaa845d62c8e2ba0b08492ad4312b4a"><div class="ttname"><a href="nux_8h.html#a8aaa845d62c8e2ba0b08492ad4312b4a">nux_handle_t</a></div><div class="ttdeci">struct Nux * nux_handle_t</div><div class="ttdoc">Nux handle.</div><div class="ttdef"><b>Definition:</b> nux.h:224</div></div>
<div class="ttc" id="anux_8h_html_a94b4b218d26fecf1b1a4e3b102484b4c"><div class="ttname"><a href="nux_8h.html#a94b4b218d26fecf1b1a4e3b102484b4c">nux_tensor_t</a></div><div class="ttdeci">struct OpaqueTensor * nux_tensor_t</div><div class="ttdoc">Handle of tensor.</div><div class="ttdef"><b>Definition:</b> nux.h:243</div></div>
<div class="ttc" id="anux_8h_html_ac300486348c761b9bfa20cf614d06dca"><div class="ttname"><a href="nux_8h.html#ac300486348c761b9bfa20cf614d06dca">tensor_get_buffer</a></div><div class="ttdeci">enum nux_error_t tensor_get_buffer(nux_tensor_t tensor, nux_buffer_t *buffer, nux_buffer_len_t *len)</div><div class="ttdoc">Get a pointer to the data buffer of a given tensor.</div></div>
<div class="ttc" id="anux_8h_html_ae68b58f43d3a93f6edf9d0c0bea56e6b"><div class="ttname"><a href="nux_8h.html#ae68b58f43d3a93f6edf9d0c0bea56e6b">create_nux</a></div><div class="ttdeci">enum nux_error_t create_nux(nux_handle_t *nux)</div><div class="ttdoc">Creates a new nux handle.</div></div>
<div class="ttc" id="anux_8h_html_aeb9dee222b8b07f4ae10e6e32b99301f"><div class="ttname"><a href="nux_8h.html#aeb9dee222b8b07f4ae10e6e32b99301f">model_run</a></div><div class="ttdeci">enum nux_error_t model_run(nux_sync_model_t model)</div><div class="ttdoc">Run a single inference task.</div></div>
<div class="ttc" id="anux_8h_html_af85121c378e53e7c270015a79c0af782"><div class="ttname"><a href="nux_8h.html#af85121c378e53e7c270015a79c0af782">destroy_nux</a></div><div class="ttdeci">void destroy_nux(nux_handle_t nux)</div><div class="ttdoc">Destroy the Nux handle and release its resources.</div></div>
<div class="ttc" id="anux_8h_html_af8a884f8271dddc703f18103a56157ba"><div class="ttname"><a href="nux_8h.html#af8a884f8271dddc703f18103a56157ba">model_output_tensor</a></div><div class="ttdeci">enum nux_error_t model_output_tensor(nux_sync_model_t model, uint32_t index, nux_tensor_t *tensor)</div><div class="ttdoc">Get the handle of a specified output tensor from a given sync model.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Task Model</h1>
<p >The task model provides APIs to run multiple inference tasks asynchronously and simultaneously. The callback functions defined by users will be called when each task is completed. When a user creates a task model, the user can configure the concurrency of running tasks depending on HW capacity.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Example of Task Model</h2>
<div class="fragment"><div class="line"><span class="comment">// Define three callback functions for a task model</span></div>
<div class="line"><span class="keywordtype">void</span> my_nux_output_cb(<a class="code hl_typedef" href="nux_8h.html#a85c8a2e016cba474b1d72a43be2658b8">nux_request_id_t</a> <span class="keywordtype">id</span>,</div>
<div class="line">                      <a class="code hl_typedef" href="nux_8h.html#a2a467bd31283be58e2c7e1f081d39389">nux_output_index_t</a> out_id,</div>
<div class="line">                      <a class="code hl_typedef" href="nux_8h.html#af81df491b6c3789d07e01f08a7bebca7">nux_buffer_t</a> buf,</div>
<div class="line">                      <a class="code hl_typedef" href="nux_8h.html#aed964c658135b64a4615538f6d3fe673">nux_buffer_len_t</a> buf_len) {</div>
<div class="line">    <span class="comment">// fill your logic</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> my_error_cb(<a class="code hl_typedef" href="nux_8h.html#a85c8a2e016cba474b1d72a43be2658b8">nux_request_id_t</a> <span class="keywordtype">id</span>, <a class="code hl_enumeration" href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03">nux_error_t</a> err) {</div>
<div class="line">    <span class="comment">// fill your logic</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> my_finish_cb(<a class="code hl_typedef" href="nux_8h.html#a85c8a2e016cba474b1d72a43be2658b8">nux_request_id_t</a> <span class="keywordtype">id</span>) {</div>
<div class="line">    <span class="comment">// fill your logic</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> run() {</div>
<div class="line">    <span class="comment">// Get the size of ENF file</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *enf_path = <span class="stringliteral">&quot;&lt;a path of ENF file&gt;&quot;</span>;</div>
<div class="line">    <span class="keyword">struct </span>stat st;</div>
<div class="line">    stat(enf_path, &amp;st);</div>
<div class="line">    <span class="keywordtype">size_t</span> enf_size = st.st_size;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Read the ENF binary from the ENF file</span></div>
<div class="line">    <span class="keywordtype">void</span> *enf_buf = malloc(enf_size);</div>
<div class="line">    FILE *enf_file = fopen(enf_path, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line">    <span class="keywordtype">size_t</span> read_item = fread(enf_buf, enf_size, 1, enf_file);</div>
<div class="line">    assert(read_item == 1);</div>
<div class="line">    fclose(enf_file);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Create a nux handle</span></div>
<div class="line">    <a class="code hl_typedef" href="nux_8h.html#a8aaa845d62c8e2ba0b08492ad4312b4a">nux_handle_t</a> nux = NULL;</div>
<div class="line">    assert(<a class="code hl_function" href="nux_8h.html#ae68b58f43d3a93f6edf9d0c0bea56e6b">create_nux</a>(&amp;nux) == <a class="code hl_enumvalue" href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a">nux_error_t_success</a>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Create a task model with 3 max concurrency</span></div>
<div class="line">    <a class="code hl_typedef" href="nux_8h.html#a2a9df2cca7933d9a992ff02f18f7b32e">nux_task_model_t</a> task_model = NULL;</div>
<div class="line">    <span class="keyword">const</span> uint32_t max_concurrency = 3;</div>
<div class="line">    assert(<a class="code hl_function" href="nux_8h.html#a0842cc2b55b567e39a175b287690b833">nux_create_task_model</a>(nux, enf_buf, enf_size, max_concurrency,</div>
<div class="line">           my_nux_output_cb, my_error_cb, my_finish_cb, &amp;task_model) == <a class="code hl_enumvalue" href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a">nux_error_t_success</a>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Get a single task which allows your code to request a single asynchronous inference task.</span></div>
<div class="line">    <span class="comment">// Depending on the concurrency, you can get multiple tasks at the same time. </span></div>
<div class="line">    <span class="comment">// In this case, you can request multiple tasks simultaneously.</span></div>
<div class="line">    <span class="comment">// If there&#39;s no available task slot, calling task_model_get_task will be blocked </span></div>
<div class="line">    <span class="comment">// until new available task comes out.</span></div>
<div class="line">    <a class="code hl_typedef" href="nux_8h.html#acce67ab377db47043a0ae0f1e50e38e1">nux_task_t</a> task1 = NULL;</div>
<div class="line">    assert(<a class="code hl_function" href="nux_8h.html#a2a325d501f34c8d3047b17a5acd8f54c">task_model_get_task</a>(task_model, &amp;task1) == <a class="code hl_enumvalue" href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03a9ed6c5025d2d89b340cd46185d394b3a">nux_error_t_success</a>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Fill the buffer of the 0th input tensor with your data.</span></div>
<div class="line">    <span class="comment">// Here, the input shape of the 0th input tensor is 1x28x28x1 in NxHxWxC, </span></div>
<div class="line">    <span class="comment">// and it has totally 784 elements.</span></div>
<div class="line">    <span class="keyword">const</span> uintptr_t INPUT_SIZE = 784;</div>
<div class="line">    assert(<a class="code hl_function" href="nux_8h.html#a5e21f23e53910367aedd397a9e48b8ec">task_input_size</a>(task1, 0) == INPUT_SIZE);</div>
<div class="line">    <span class="comment">// It&#39;s a fake data. Please fill this buffer with yours.</span></div>
<div class="line">    uint8_t input_buf [784] = {[0 ... 783] = 1};</div>
<div class="line">    <span class="comment">// Get a mutable buffer of the 0th input tensor from task1</span></div>
<div class="line">    uint8_t* buf = <a class="code hl_function" href="nux_8h.html#ab33af2615cc40ef5c1f808e92844989a">task_input</a>(task1, 0);</div>
<div class="line">    <span class="comment">// Copy your data to the buffer</span></div>
<div class="line">    memcpy(buf, input_buf, INPUT_SIZE);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Submit the task1 with an arbitrary req_id, </span></div>
<div class="line">    <span class="comment">// which will be passed to callback functions to identify some context.</span></div>
<div class="line">    <a class="code hl_typedef" href="nux_8h.html#a801df2cce56ae7c45688df15e2960019">RequestId</a> req_id = 1;</div>
<div class="line">    <a class="code hl_function" href="nux_8h.html#af9d6c581a36012b468636777dd4eaca1">task_execute</a>(task1, req_id);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Wait for until all submitted tasks are completed</span></div>
<div class="line">    <span class="keywordflow">while</span>(!<a class="code hl_function" href="nux_8h.html#a4c97ec2ec3df18d11981f050f1c66890">task_model_is_all_task_done</a>(task_model)) {</div>
<div class="line">        sleep(1);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Release resources</span></div>
<div class="line">    <a class="code hl_function" href="nux_8h.html#a7475a6df5e1c04159322b71d55979799">destroy_task_model</a>(task_model);</div>
<div class="line">    <a class="code hl_function" href="nux_8h.html#af85121c378e53e7c270015a79c0af782">destroy_nux</a>(nux);</div>
<div class="line">    free(enf_buf);</div>
<div class="line">}</div>
<div class="ttc" id="anux_8h_html_a0842cc2b55b567e39a175b287690b833"><div class="ttname"><a href="nux_8h.html#a0842cc2b55b567e39a175b287690b833">nux_create_task_model</a></div><div class="ttdeci">enum nux_error_t nux_create_task_model(nux_handle_t nux, const uint8_t *buffer, nux_buffer_len_t len, uint32_t max_batch, nux_output_callback_t output_callback, nux_error_callback_t error_callback, nux_finish_callback_t finish_callback, nux_task_model_t *task_model)</div><div class="ttdoc">Create an instance of a task model.</div></div>
<div class="ttc" id="anux_8h_html_a2a325d501f34c8d3047b17a5acd8f54c"><div class="ttname"><a href="nux_8h.html#a2a325d501f34c8d3047b17a5acd8f54c">task_model_get_task</a></div><div class="ttdeci">enum nux_error_t task_model_get_task(nux_task_model_t task_model, nux_task_t *task)</div><div class="ttdoc">Get a task handle from a specified task model.</div></div>
<div class="ttc" id="anux_8h_html_a2a467bd31283be58e2c7e1f081d39389"><div class="ttname"><a href="nux_8h.html#a2a467bd31283be58e2c7e1f081d39389">nux_output_index_t</a></div><div class="ttdeci">OutputIndex nux_output_index_t</div><div class="ttdoc">Index of an output tensor, used in task model.</div><div class="ttdef"><b>Definition:</b> nux.h:265</div></div>
<div class="ttc" id="anux_8h_html_a2a9df2cca7933d9a992ff02f18f7b32e"><div class="ttname"><a href="nux_8h.html#a2a9df2cca7933d9a992ff02f18f7b32e">nux_task_model_t</a></div><div class="ttdeci">struct TaskModel * nux_task_model_t</div><div class="ttdoc">Handle of a task model.</div><div class="ttdef"><b>Definition:</b> nux.h:294</div></div>
<div class="ttc" id="anux_8h_html_a4c97ec2ec3df18d11981f050f1c66890"><div class="ttname"><a href="nux_8h.html#a4c97ec2ec3df18d11981f050f1c66890">task_model_is_all_task_done</a></div><div class="ttdeci">bool task_model_is_all_task_done(nux_task_model_t task_model)</div><div class="ttdoc">Return true if there's no running tasks, or false if any task is still running.</div></div>
<div class="ttc" id="anux_8h_html_a5e21f23e53910367aedd397a9e48b8ec"><div class="ttname"><a href="nux_8h.html#a5e21f23e53910367aedd397a9e48b8ec">task_input_size</a></div><div class="ttdeci">nux_buffer_len_t task_input_size(nux_task_t task, nux_input_index_t index)</div><div class="ttdoc">Return the buffer length in bytes of the specified input tensor.</div></div>
<div class="ttc" id="anux_8h_html_a5f9e5f9dc6c0a6652d730ef3fc5fff03"><div class="ttname"><a href="nux_8h.html#a5f9e5f9dc6c0a6652d730ef3fc5fff03">nux_error_t</a></div><div class="ttdeci">nux_error_t</div><div class="ttdoc">Represent a return status of a function that can fail.</div><div class="ttdef"><b>Definition:</b> nux.h:48</div></div>
<div class="ttc" id="anux_8h_html_a7475a6df5e1c04159322b71d55979799"><div class="ttname"><a href="nux_8h.html#a7475a6df5e1c04159322b71d55979799">destroy_task_model</a></div><div class="ttdeci">void destroy_task_model(nux_task_model_t task_model)</div><div class="ttdoc">Destroy the task model and release its resources.</div></div>
<div class="ttc" id="anux_8h_html_a801df2cce56ae7c45688df15e2960019"><div class="ttname"><a href="nux_8h.html#a801df2cce56ae7c45688df15e2960019">RequestId</a></div><div class="ttdeci">uintptr_t RequestId</div><div class="ttdef"><b>Definition:</b> nux.h:253</div></div>
<div class="ttc" id="anux_8h_html_a85c8a2e016cba474b1d72a43be2658b8"><div class="ttname"><a href="nux_8h.html#a85c8a2e016cba474b1d72a43be2658b8">nux_request_id_t</a></div><div class="ttdeci">RequestId nux_request_id_t</div><div class="ttdoc">Identifier to distinguish tasks in a task model.</div><div class="ttdef"><b>Definition:</b> nux.h:258</div></div>
<div class="ttc" id="anux_8h_html_ab33af2615cc40ef5c1f808e92844989a"><div class="ttname"><a href="nux_8h.html#ab33af2615cc40ef5c1f808e92844989a">task_input</a></div><div class="ttdeci">nux_buffer_t task_input(nux_task_t task, nux_input_index_t index)</div><div class="ttdoc">Return a mutable pointer to the buffer of the specified input tensor.</div></div>
<div class="ttc" id="anux_8h_html_acce67ab377db47043a0ae0f1e50e38e1"><div class="ttname"><a href="nux_8h.html#acce67ab377db47043a0ae0f1e50e38e1">nux_task_t</a></div><div class="ttdeci">struct Task * nux_task_t</div><div class="ttdoc">Handle of a task of a task model.</div><div class="ttdef"><b>Definition:</b> nux.h:301</div></div>
<div class="ttc" id="anux_8h_html_aed964c658135b64a4615538f6d3fe673"><div class="ttname"><a href="nux_8h.html#aed964c658135b64a4615538f6d3fe673">nux_buffer_len_t</a></div><div class="ttdeci">uintptr_t nux_buffer_len_t</div><div class="ttdoc">Byte length of a data buffer.</div><div class="ttdef"><b>Definition:</b> nux.h:229</div></div>
<div class="ttc" id="anux_8h_html_af81df491b6c3789d07e01f08a7bebca7"><div class="ttname"><a href="nux_8h.html#af81df491b6c3789d07e01f08a7bebca7">nux_buffer_t</a></div><div class="ttdeci">uint8_t * nux_buffer_t</div><div class="ttdoc">Pointer to a data buffer.</div><div class="ttdef"><b>Definition:</b> nux.h:251</div></div>
<div class="ttc" id="anux_8h_html_af9d6c581a36012b468636777dd4eaca1"><div class="ttname"><a href="nux_8h.html#af9d6c581a36012b468636777dd4eaca1">task_execute</a></div><div class="ttdeci">enum nux_error_t task_execute(nux_task_t task, nux_request_id_t request_id)</div><div class="ttdoc">Request one asynchronous inference task.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5"></a>
How to build source codes with Nux</h1>
<p >To build your source code with Nux, please follow: </p><div class="fragment"><div class="line">export NPU_TOOLS_DIR=&quot;&lt;npu-tools src dir&gt;&quot;</div>
<div class="line">export NUX_DIR=${NPU_TOOLS_DIR}/crates/nux</div>
<div class="line">cargo build --release</div>
<div class="line">cc sync_example.c -I${NUX_DIR}/include -L${NPU_TOOLS_DIR}/target/x86_64-unknown-linux-gnu/release -lnux</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
How to generate Doxygen</h1>
<p >The following commands will generate a Doxygen document at <code>$NUX_TOOLS_DIR/target/doxygen/html</code>. </p><div class="fragment"><div class="line">cd &lt;nux src root&gt;</div>
<div class="line">doxygen crates/nux/Doxyfile</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
