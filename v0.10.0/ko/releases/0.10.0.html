<!DOCTYPE html>
<html class="writer-html5" lang="ko" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Release Notes - 0.10.0 &mdash; FuriosaAI NPU 및 Software 문서  문서</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="색인" href="../genindex.html" />
    <link rel="search" title="검색" href="../search.html" />
    <link rel="next" title="Release Notes - 0.9.0" href="0.9.0.html" />
    <link rel="prev" title="레퍼런스 문서" href="../software/references.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            FuriosaAI NPU 및 Software 문서
          </a>
              <div class="version">
                0.10.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">FuriosaAI NPU</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../npu/warboy.html">FuriosaAI Warboy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FuriosaAI 소프트웨어</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../software/intro.html">FuriosaAI 소프트웨어 스택 소개</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/installation.html">드라이버, 펌웨어, 런타임 설치 가이드</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/python-sdk.html">Python SDK 설치 및 사용 가이드</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/c-sdk.html">C SDK 설치 및 사용 가이드</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/cli.html">명령행 도구</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/compiler.html">컴파일러</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/quantization.html">모델 양자화</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/performance.html">성능 최적화</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/profiler.html">성능 프로파일링</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/furiosa-models/latest/">FuriosaAI Model Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/serving.html">모델 서버 (서빙 프레임워크)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/kubernetes_support.html">Kubernetes 지원</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/vm_support.html">가상 머신 환경 지원</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/tutorials.html">튜토리얼 및 코드 예제</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/references.html">레퍼런스 문서</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SDK 릴리즈 노트</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Release Notes - 0.10.0</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">설치 또는 업그레이드 방법</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">주요 변경 사항</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#furiosart">차세대 런타임 엔진(FuriosaRT) 도입 및 런타임 개선</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">모델 서버와 서빙 프레임워크 개선</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quantization-tool">모델 양자화 도구(quantization tool) 개선</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">컴파일러 개선</a></li>
<li class="toctree-l3"><a class="reference internal" href="#profiler">성능 프로파일러(Profiler) 개선</a></li>
<li class="toctree-l3"><a class="reference internal" href="#furiosa-litmus">furiosa-litmus 개선</a></li>
<li class="toctree-l3"><a class="reference internal" href="#furiosa-bench">furiosa-bench 명령행 도구 추가</a></li>
<li class="toctree-l3"><a class="reference internal" href="#furiosa-toolkit">furiosa-toolkit 개선</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="0.9.0.html">Release Notes - 0.9.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="0.8.0.html">Release Notes - 0.8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="0.7.0.html">Release Notes - 0.7.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="0.6.0.html">Release Notes - 0.6.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="0.5.0.html">Release Notes - 0.5.0</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">고객 지원</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.discourse.group/">Furiosa SDK 사용자 게시판</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.atlassian.net/servicedesk/customer/portals/">FuriosaAI 고객지원 센터</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customer-support/bugs.html">버그 신고</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">기존 버전 문서</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.9.0/ko/">0.9.0 문서</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.8.0/ko/">0.8.0 문서</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.7.0/ko/">0.7.0 문서</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.6.3/ko/">0.6.3 문서</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.6.0/ko/">0.6.0 문서</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.5.0/ko/">0.5.0 문서</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.2.0/ko/">0.2.0 문서</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FuriosaAI NPU 및 Software 문서</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Release Notes - 0.10.0</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/releases/0.10.0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="release-notes-0-10-0">
<h1>Release Notes - 0.10.0<a class="headerlink" href="#release-notes-0-10-0" title="이 제목에 대한 퍼머링크"></a></h1>
<p>Furiosa SDK 0.10.0은 메이저 릴리스(Major Release)로
여러 장치를 지원하는 차세대 런타임 엔진,
모델의 양자화 연산자를 제거하여 성능을 향샹 시키는 최적화 기능의 사용성 개선,
NPU 사용률 등의 여러 지표를 OpenMetrics 형식으로 제공하는 기능 등을 포함한다.
furiosa-litmus는 리포팅 목적의 정보 수집이 가능하도록 개선 되었으며,
furiosa-compiler 명령행 도구의 파이썬 의존성 제거, 벤치마크 명령행 도구 추가 등의 기능 개선이 이루어졌다.
그 외에도 다수의 기능 추가, 버그 수정, 성능 개선 등을 포함한다.</p>
<table class="docutils align-default" id="id9">
<caption><span class="caption-text">컴포넌트 버전 정보</span><a class="headerlink" href="#id9" title="이 표에 대한 퍼머링크"></a></caption>
<colgroup>
<col style="width: 80%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>패키지 이름</p></th>
<th class="head"><p>버전</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NPU Driver</p></td>
<td><p>1.9.2</p></td>
</tr>
<tr class="row-odd"><td><p>NPU Firmware Tools</p></td>
<td><p>1.5.1</p></td>
</tr>
<tr class="row-even"><td><p>NPU Firmware Image</p></td>
<td><p>1.7.3</p></td>
</tr>
<tr class="row-odd"><td><p>HAL (Hardware Abstraction Layer)</p></td>
<td><p>0.11.0</p></td>
</tr>
<tr class="row-even"><td><p>Furiosa Compiler</p></td>
<td><p>0.10.0</p></td>
</tr>
<tr class="row-odd"><td><p>Furiosa Quantizer</p></td>
<td><p>0.10.0</p></td>
</tr>
<tr class="row-even"><td><p>Furiosa Runtime</p></td>
<td><p>0.10.0</p></td>
</tr>
<tr class="row-odd"><td><p>Python SDK (furiosa-server, furiosa-serving, ..)</p></td>
<td><p>0.10.0</p></td>
</tr>
<tr class="row-even"><td><p>NPU Toolkit (furiosactl)</p></td>
<td><p>0.11.0</p></td>
</tr>
<tr class="row-odd"><td><p>NPU Device Plugin</p></td>
<td><p>0.10.1</p></td>
</tr>
<tr class="row-even"><td><p>NPU Feature Discovery</p></td>
<td><p>0.2.0</p></td>
</tr>
</tbody>
</table>
<section id="id1">
<h2>설치 또는 업그레이드 방법<a class="headerlink" href="#id1" title="이 제목에 대한 퍼머링크"></a></h2>
<p>APT 패키지 관리자 사용하고 있다면 다음과 같이 업그레이드할 수 있다.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>upgrade
</pre></div>
</div>
<p>특정 패키지를 지정해서 업그레이드 하고 싶다면 다음과 같이 실행 한다.
APT 패키지 관리자 설정 및 설치 방법에 대한 자세한 설명은 <a class="reference internal" href="../software/installation.html#requiredpackages"><span class="std std-ref">드라이버, 펌웨어, 런타임 설치 가이드</span></a> 에서 찾을 수 있다.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>furiosa-driver-warboy<span class="w"> </span>furiosa-libnux
</pre></div>
</div>
<p>펌웨어 업그레이드는 다음과 같이 실행한다.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>furiosa-firmware-tools<span class="w"> </span>furiosa-firmware-image
</pre></div>
</div>
<p>파이썬 패키지 업그레이드는 다음과 같이 실행한다. 새로 추가된 기능들을 사용하기 위해서는 패키지 설치와 관련된 도구들이 최신 버전으로 먼저 업데이트 되어야 한다.
파이썬 패키지 설치와 환경 설정에 대한 자세한 설명은 <a class="reference internal" href="../software/python-sdk.html#pythonsdk"><span class="std std-ref">Python SDK 설치 및 사용 가이드</span></a> 에서 찾을 수 있다.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>pip<span class="w"> </span>setuptools<span class="w"> </span>wheel
pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>furiosa-sdk
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">경고</p>
<p>pip를 업그레이드 할 때 아래 오류를 접한다면, <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--upgrade</span> <span class="pre">pip</span></code> 명령을 통해 pip를 먼저 업그레이드 해야 한다.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>ERROR:<span class="w"> </span>Could<span class="w"> </span>not<span class="w"> </span>find<span class="w"> </span>a<span class="w"> </span>version<span class="w"> </span>that<span class="w"> </span>satisfies<span class="w"> </span>the<span class="w"> </span>requirement<span class="w"> </span>furiosa-quantizer-impl<span class="o">==</span><span class="m">0</span>.10.*<span class="w"> </span><span class="o">(</span>from<span class="w"> </span>furiosa-quantizer<span class="o">==</span><span class="m">0</span>.10.*-&gt;furiosa-sdk<span class="o">)</span><span class="w"> </span><span class="o">(</span>from<span class="w"> </span>versions:<span class="w"> </span>none<span class="o">)</span>
ERROR:<span class="w"> </span>No<span class="w"> </span>matching<span class="w"> </span>distribution<span class="w"> </span>found<span class="w"> </span><span class="k">for</span><span class="w"> </span>furiosa-quantizer-impl<span class="o">==</span><span class="m">0</span>.10.*<span class="w"> </span><span class="o">(</span>from<span class="w"> </span>furiosa-quantizer<span class="o">==</span><span class="m">0</span>.10.*-&gt;furiosa-sdk<span class="o">)</span>
</pre></div>
</div>
</div>
</section>
<section id="id2">
<h2>주요 변경 사항<a class="headerlink" href="#id2" title="이 제목에 대한 퍼머링크"></a></h2>
<section id="furiosart">
<h3>차세대 런타임 엔진(FuriosaRT) 도입 및 런타임 개선<a class="headerlink" href="#furiosart" title="이 제목에 대한 퍼머링크"></a></h3>
<p>0.10.0 릴리스는 차세대 런타임 Furiosa Runtime (FuriosaRT)를 포함한다. FuriosaRT는
새로 설계된 런타임 라이브러리로 향후 더 많은 기능을 제공할 수 있도록 설계되었으며 다양한 워크로드에서 높은 성능을 제공한다.
FuriosaRT는 추론을 제공하는 핵심 라이브러리로 Python API를 제공 할 뿐 아니라 <code class="docutils literal notranslate"><span class="pre">furiosa-bench</span></code> 와 <code class="docutils literal notranslate"><span class="pre">furiosa-litmus</span></code>
같은 명령행 도구, 그리고 서빙 프레임워크 등에서 사용된다. FuriosaRT는 기존 런타임과
거의 호환될 뿐 아니라 다음과 같은 새로운 기능을 포함한다.</p>
<section id="api">
<h4>새 API 도입<a class="headerlink" href="#api" title="이 제목에 대한 퍼머링크"></a></h4>
<p>FuriosaRT는 파이썬 <a class="reference external" href="https://docs.python.org/3/library/asyncio.html">asyncio</a> 를
사용한 비동기(async) API를 새로이 지원한다. 기존의 동기 API는 배치 작업에는 충분하였으나
개별적 요청에 따라 추론을 해야 서빙 시나리오에서는 부족함이 있었다. 새로운 런타임에서는 비동기 API가
기본적으로 지원되며, 기존 기능을 유지하면서도 더 간결하게 사용할 수 있도록 많은 부분이 다듬어졌다.
새 API에 대한 상세한 설명은 <a class="reference external" href="https://furiosa-ai.github.io/docs/v0.10.0/en/api/python/furiosa.runtime.html">Furiosa SDK API Reference - furiosa.runtime</a>
에서 찾아 볼 수 있다.</p>
</section>
<section id="npu">
<span id="release-0-10-0-deviceselector"></span><h4>멀티 NPU 지원 및 장치 설정 방법 개선<a class="headerlink" href="#npu" title="이 제목에 대한 퍼머링크"></a></h4>
<p>FuriosaRT에서는 하나의 세션에서 다수의 장치를 지원한다. 따라서 별도 구현 없이도 다수의 장치를 이용하여 고성능 추론을 수행할 수 있다.
또한, 개선된 장치 지정 방법을 제공한다. 기존에는 환경변수
<code class="docutils literal notranslate"><span class="pre">NPU_DEVNAME</span></code> 또는 <code class="docutils literal notranslate"><span class="pre">session.create(..,</span> <span class="pre">device=”..”)</span></code> 와 같은 API를 이용해서 <code class="docutils literal notranslate"><span class="pre">devfs</span></code> 의
장치파일 이름을 직접 설정해야 했다. 이 방법은 다양한 환경에서 그대로 적용하기 어렵고 많은 장치를 사용해야 하는 경우
설정이 복잡했다.</p>
<p>이번 릴리스 부터 <code class="docutils literal notranslate"><span class="pre">devfs</span></code> 이름을 연상 시키는 환경 변수 <code class="docutils literal notranslate"><span class="pre">NPU_DEVNAME</span></code> 대신
<code class="docutils literal notranslate"><span class="pre">FURIOSA_DEVICES</span></code> 라는 새로운 환경변수가 도입되었다. 또한 이 환경 변수는
NPU 종류, 구성, 개수를 표현하는 텍스트 설정을 받아 들인다.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">FURIOSA_DEVICES</span><span class="o">=</span><span class="s2">&quot;warboy(2)*8&quot;</span>
</pre></div>
</div>
<p>위 예제는 FuriosaRT가 시스템에서 가용한 2-PE 퓨전된 8개의 Warboy를 찾아 사용하게 한다.
또한 아래 예와 같이 특정 장치의 식별자를 지정하는 방법도 지원한다.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">FURIOSA_DEVICES</span><span class="o">=</span><span class="s2">&quot;npu:0:0-1,npu:1:0-1&quot;</span>
</pre></div>
</div>
<p>하위 호환성 보장을 위해 FuriosaRT는 <code class="docutils literal notranslate"><span class="pre">NPU_DEVNAME</span></code> 환경 변수도 여전히 지원하며
<code class="docutils literal notranslate"><span class="pre">npu0pe0-1</span></code> 과 기존 설정 방법도 여전히 사용 가능하다. 그러나 향후 릴리스에서 <code class="docutils literal notranslate"><span class="pre">NPU_DEVNAME</span></code> 환경변수는
제거될 예정이다.</p>
<p>자세한 장치 설정 방법은 <a class="reference external" href="https://furiosa-ai.github.io/docs/v0.10.0/en/api/python/furiosa.runtime.html#device-specification">Furiosa SDK API Reference - Device Specification</a> 에서 찾아볼 수 있다.</p>
</section>
<section id="throughput">
<h4>처리량(throughput) 향상<a class="headerlink" href="#throughput" title="이 제목에 대한 퍼머링크"></a></h4>
<p>기존 런타임보다 처리량(throughput)이 크게 향상되었다. 또한, <a class="reference external" href="https://furiosa-ai.github.io/docs/v0.10.0/en/api/python/furiosa.runtime.html#runner-api">worker_num</a>
설정을 통해 제어되는 워커(worker 또는 NPU 스레드)가 기존에는 2를 초과하면 성능이 크게 향상 되지 않았으나
FuriosaRT에서는 모델에 따라 8이나 모델에 따라 10 이상에서도 성능이 향상되는 것이 관찰되었다.
이번 릴리즈 부터 포함된 <code class="docutils literal notranslate"><span class="pre">furiosa-bench</span></code> 를 이용해
Resnet50, YOLOv5m, YOLOv5L, SSD ResNet34, SSD MobileNet 모델의 처리량 벤치마크를 수행하였고
<code class="docutils literal notranslate"><span class="pre">worker_num</span> <span class="pre">&gt;=</span> <span class="pre">4</span></code> 조건에서 모델에 따라 수 퍼센트에서 수십 퍼센트까지 성능이 향상되는 것을 관찰할 수 있었다.</p>
</section>
</section>
<section id="id3">
<h3>모델 서버와 서빙 프레임워크 개선<a class="headerlink" href="#id3" title="이 제목에 대한 퍼머링크"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">furiosa-server</span></code>, <code class="docutils literal notranslate"><span class="pre">furioa-serving</span></code> 은 각각 모델의 서빙을 제공하는 웹 서버와
서빙 애플리케이션을 개발하기 위한 라이브러리이다.</p>
<p>이번 릴리스에서는 차세대 런타임인 FuriosaRT를 사용하도록 개선되었으며 구체적인 개선 사항은 다음과 같다.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#release-0-10-0-deviceselector"><span class="std std-ref">멀티 NPU 지원 및 장치 설정 방법 개선</span></a> 이 그대로 적용되어 다수의 장치를 쉽게 설정할 수 있다.</p></li>
<li><p>FuriosaRT가 제공하는 <a class="reference external" href="https://docs.python.org/3/library/asyncio.html">asyncio</a> 기반의 새 API를 사용하도록 내부가 개선되어 더 적은 리소스로 더 높은 성능을 낼 수 있다.</p></li>
<li><p>FuriosaRT의 성능 향상 혜택을 그대로 볼 수 있다. 즉, 더 성능 높은 워커 수를 이용할 수 있다.</p></li>
</ul>
<p>모델 서버에 대한 자세한 설명은 <a class="reference internal" href="../software/serving.html#modelserving"><span class="std std-ref">모델 서버 (서빙 프레임워크)</span></a> 을 참고한다.</p>
</section>
<section id="quantization-tool">
<h3>모델 양자화 도구(quantization tool) 개선<a class="headerlink" href="#quantization-tool" title="이 제목에 대한 퍼머링크"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">furiosa-quantizer</span></code> 는 트레이닝 된 모델을 양자화된 모델로 변환(post-training quantization) 해주는
라이브러리이다. 이번 0.10.0 릴리스에는 양자화 도구의 사용성을 크게 개선 하였으며 이를 위해
<code class="docutils literal notranslate"><span class="pre">furiosa.quantizer.quantize()</span></code> 함수의 일부 파라미터가 변경되었다.</p>
<section id="id5">
<h4>기존 문제점<a class="headerlink" href="#id5" title="이 제목에 대한 퍼머링크"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">furiosa.quantizer.quantize()</span></code> 함수는 모델 양자화 도구의 핵심 함수로
ONNX 모델을 양자화된 모델(quantized model)로 변환하여 반환한다.
입력 타입을 <code class="docutils literal notranslate"><span class="pre">float32</span></code> 대신 <code class="docutils literal notranslate"><span class="pre">uint8</span></code> 로 직접 사용할 수 있도록 하는 <code class="docutils literal notranslate"><span class="pre">with_quantize</span></code>
파라미터를 제공하는데, 이미지와 같이 원본 데이터(픽셀 값)이 <code class="docutils literal notranslate"><span class="pre">uint8</span></code> 로 표현되는 경우에 실행 중 양자화 과정을 생략할 수 있어
큰 성능 향상을 기대할 수 있다.
예를 들면, YOLOv5 Large 같은 모델의 경우 이 옵션을 사용하면 60.639 ms 에서 0.277 ms 로 실행 시간이 크게 개선된다.</p>
<p>동일한 방법으로 출력 타입도 <code class="docutils literal notranslate"><span class="pre">float32</span></code> 대신 <code class="docutils literal notranslate"><span class="pre">unt8</span></code> 로 직접 사용할 수 있도록 하는 <code class="docutils literal notranslate"><span class="pre">normalized_pixel_outputs</span></code>
옵션을 제공하는데 모델의 출력이 RGB 형태로 표현되는 이미지이거나, 정수 값으로 직접 사용 가능한 경우 선택할 수 있다.
이 옵션 역시 큰 성능 향상을 기대할 수 있다.</p>
<p>응용에 따라 두 옵션이 사용 가능한 경우 수배에서 수백배까지도 실행 시간을 단축시킬 수 있다.
그러나 다음과 같은 한계와 피드백이 있었다.</p>
<ul class="simple">
<li><p>모델의 출력이 이미지가 아닌 경우 파라미터 이름 <code class="docutils literal notranslate"><span class="pre">normalized_pixel_outputs</span></code> 가 의미를 잘 표현하지 못한다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">normalized_pixel_outputs</span></code> 옵션은 지정된 출력 텐서의 범위를 0과 1 사이 실수로 전제하는데 다양한 응용에 적용하는데 한계가 있다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_quantize</span></code>, <code class="docutils literal notranslate"><span class="pre">normalized_pixel_outputs</span></code> 옵션 모두 <code class="docutils literal notranslate"><span class="pre">uint8</span></code> 타입만 지원했으며 <code class="docutils literal notranslate"><span class="pre">int8</span></code> 타입을 지원하지 못했다.</p></li>
</ul>
</section>
<section id="id6">
<h4>개선 사항<a class="headerlink" href="#id6" title="이 제목에 대한 퍼머링크"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">furiosa.quantizer.quantize()</span></code> 에서 <code class="docutils literal notranslate"><span class="pre">with_quantize</span></code>, <code class="docutils literal notranslate"><span class="pre">normalized_pixel_outputs</span></code> 가 파라미터에서 제거 된다.</p></li>
<li><p>대신 <a class="reference external" href="https://furiosa-ai.github.io/docs/v0.10.0/en/api/python/furiosa.quantizer.html#furiosa.quantizer.ModelEditor">ModelEditor</a> 추가되어 모델의 입력/출력 타입에 대한 상세한 최적화 옵션을 설정할 수 있으며 다음 기능을 제공한다.
* <code class="docutils literal notranslate"><span class="pre">convert_input_type(tensor_name,</span> <span class="pre">TensorType)</span></code> 메소드는 텐서 이름을 받아 해당 입력 텐서에 해당되는
<code class="docutils literal notranslate"><span class="pre">quantize</span></code> 연산자를 제거하고 입력 타입을 <code class="docutils literal notranslate"><span class="pre">TensorType</span></code> 으로 변경한다.
* <code class="docutils literal notranslate"><span class="pre">convert_output_type(tensor_name,</span> <span class="pre">TensorType,</span> <span class="pre">tensor_range)</span></code> 메소드는 텐서 이름을 받아 해당 출력 텐서에 해당되는
<code class="docutils literal notranslate"><span class="pre">dequantize</span></code> 연산자를 제거하고 입력 타입을 <code class="docutils literal notranslate"><span class="pre">TensorType</span></code> 으로 변경하고 주어진 <code class="docutils literal notranslate"><span class="pre">tensor_range</span></code> 범위에 맞게 스케일하도록 모델을 수정한다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">convert_{output,input}_type</span></code> 함수는 텐서 이름을 사용하기 때문에 <code class="docutils literal notranslate"><span class="pre">furiosa.quantizer</span></code> 모듈 아래 <code class="docutils literal notranslate"><span class="pre">get_pure_input_names(ModelProto)</span></code> <code class="docutils literal notranslate"><span class="pre">get_output_names(ModelProto)</span></code> 같은 헬퍼 함수를 사용하여 텐서 이름을 얻어야 한다.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">참고</p>
<p>이번 릴리즈에 포함된 <code class="docutils literal notranslate"><span class="pre">furiosa.quantizer.quantize()</span></code> 에서 <code class="docutils literal notranslate"><span class="pre">with_quantize</span></code>, <code class="docutils literal notranslate"><span class="pre">normalized_pixel_outputs</span></code>
가 파라미터에서 제거 된 것은 기존 코드를 수정해야 하는 변경이다.</p>
</div>
<p>더 자세한 내용은 <a class="reference external" href="https://furiosa-ai.github.io/docs/v0.10.0/en/api/python/furiosa.quantizer.html#furiosa.quantizer.ModelEditor">ModelEditor</a> 의
API 레퍼런스를 참고할 수 있으며 실제 적용 예는 <a class="reference internal" href="../software/tutorials.html#tutorial"><span class="std std-ref">튜토리얼 및 코드 예제</span></a> 의 예제 코드에서 찾아볼 수 있다.</p>
</section>
</section>
<section id="id8">
<h3>컴파일러 개선<a class="headerlink" href="#id8" title="이 제목에 대한 퍼머링크"></a></h3>
<p>0.10.0의 컴파일러는 <cite>Dequantize</cite> 연산자의 NPU 가속을 지원한다. 따라서 <cite>Dequantize</cite> 연산을 잘 활용할 수 있는
모델은 성능이 개선될 수 있다. <cite>Dequantize</cite> 연산자 가속과 관련된 다른 최적화 관련 옵션은 최적화 가이드에서 찾아볼 수 있다.</p>
<p>또한, 컴파일러 결과 캐시 기능이 충분히 안정화 되었다고 판단되어 결과 캐쉬 유효기간이 기존 2일에서 30일로 변경된다.
<a class="reference internal" href="../software/compiler.html#compilercache"><span class="std std-ref">컴파일러 캐쉬 (Compiler Cache)</span></a> 에서 자세한 설명을 찾아볼 수 있다.</p>
<p>그 외에도 컴파일러 명령행 도구는 다음 사항이 개선되었다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">furiosa</span> <span class="pre">compile</span></code> 대신 <code class="docutils literal notranslate"><span class="pre">furiosa-compiler</span></code> 명령을 직접 사용할 수 있다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">furiosa-compiler</span></code> 명령은 네이티브 실행 파일(native executable)이 되어 Python 실행 환경을 요구하지 않는다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span> <span class="pre">furiosa-compiler</span></code> 명령을 통해 컴파일러를 설치할 수 있다.</p></li>
<li><p>Python 의존성을 가지는 기존 <code class="docutils literal notranslate"><span class="pre">furiosa</span> <span class="pre">compile</span></code> 명령는 현재는 호환성을 위해 유지되며 향후 릴리스에서 제거 될 수 있다.</p></li>
</ul>
<p>컴파일러 명령행 도구의 자세한 사용법은 <a class="reference internal" href="../software/compiler.html#compilercli"><span class="std std-ref">furiosa-compiler</span></a> 에서 찾아볼 수 있다.</p>
</section>
<section id="profiler">
<h3>성능 프로파일러(Profiler) 개선<a class="headerlink" href="#profiler" title="이 제목에 대한 퍼머링크"></a></h3>
<p>성능 프로파일러는 추론의 실제 실행시간을 구간별로 측정하여 성능 분석을 돕는 도구이다.
이번 릴리스에서는 <a class="reference internal" href="../software/profiler.html#profilerenabledbycontext"><span class="std std-ref">프로파일러 컨텍스트를 이용한 트레이스</span></a> 기능에 임시 중단/재개 기능이 추가 되었다.</p>
<p>사용자는 프로파일링 컨텍스트 내에서 전/후처리 시간, 워밍업(warming up) 시간 등 프로파일링이 불필요한 구간을
제외하고 프로파일링 함으로써 프로파일링에 소요되는 오버헤드 및 프로파일링 결과물의 크기를 줄일 수 있다.
<code class="docutils literal notranslate"><span class="pre">profile.pause()</span></code> 와 <code class="docutils literal notranslate"><span class="pre">profile.resume()</span></code> 함수를 호출하여 프로파일링을 임시로 중단/재개할 수 있다.
자세한 사용법과 예제는 <a class="reference internal" href="../software/profiler.html#temporarilydisablingprofiler"><span class="std std-ref">프로파일러 컨텍스트의 일시적 중단/재개</span></a> 에서 찾아볼 수 있다.</p>
</section>
<section id="furiosa-litmus">
<h3>furiosa-litmus 개선<a class="headerlink" href="#furiosa-litmus" title="이 제목에 대한 퍼머링크"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">furiosa-litmus</span></code> 는 모델에 대한 NPU와 Furiosa SDK의 호환성을 검사하는 도구이다.
0.10.0 릴리스에서는 <code class="docutils literal notranslate"><span class="pre">furiosa-litmus</span></code> 명령행 도구에 에러 리포팅을 위한 정보 수집 기능이 추가되었다.
또한 검사하는 단계가 3단계에서 4단계로 확장되었으며 4단계는 모델을 실제 런타임에서 실행하여 추론 성능을 측정한다.</p>
<p><code class="docutils literal notranslate"><span class="pre">furiosa-litmus</span></code> 실행 시 <code class="docutils literal notranslate"><span class="pre">--dump</span> <span class="pre">&lt;OUTPUT_PREFIX&gt;</span></code> 옵션을 사용하면
각 단계별로 출력되는 로그와 컴파일 단계에서 생성하는 메타데이터, 추론 단계에서 수집하는 프로파일링 결과를 모아
<code class="docutils literal notranslate"><span class="pre">&lt;OUTPUT_PREFIX&gt;-&lt;unix_epoch&gt;.zip</span></code> 파일로 저장한다.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>furiosa-litmus<span class="w"> </span>&lt;MODEL_PATH&gt;<span class="w"> </span>--dump<span class="w"> </span>&lt;OUTPUT_PREFIX&gt;
</pre></div>
</div>
<p>수집된 정보에는 모델 자체를 포함하지 않으며 모델 네트워크의 메타데이터, 메모리 사용량,
환경 정보(파이썬 버전, SDK, 컴파일러의 버전 및 주요 의존 라이브러리 버전) 등을 포함한다.
<code class="docutils literal notranslate"><span class="pre">unzip</span></code> 명령으로 직접 압축을 풀어 내용을 확인할 수 있으며
버그 리포팅 시 해당 파일을 첨부하면 진단 및 분석에 도움이 된다.</p>
</section>
<section id="furiosa-bench">
<h3>furiosa-bench 명령행 도구 추가<a class="headerlink" href="#furiosa-bench" title="이 제목에 대한 퍼머링크"></a></h3>
<p>성능 벤치마크 명령행 도구인 <code class="docutils literal notranslate"><span class="pre">furiosa-bench</span></code> 가 추가되었다.
새로 도입되는 furiosa-bench 커맨드는 다양한
워크로드와 런타임 설정을 간단하게 제어할 수 있는 옵션을 제공한다. 지연 시간과 처리량 위주 워크로드를 선택 가능하며
얼마나 많은 장치를 사용할지, 얼마나 오래 수행할지 등을 옵션으로 설정할 수 있다. ONNX와 Tflite 모델을
사용할 수 있으며 모델을 furiosa-compiler로 컴파일한 ENF 파일도 사용할 수 있다.
커맨드의 자세한 설명은 <a class="reference internal" href="../software/cli.html#furiosabench"><span class="std std-ref">furiosa-bench (벤치마크 도구)</span></a> 에서 찾아볼 수 있다.</p>
<p>처리량(throughput) 벤치마크 예시</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ furiosa-bench ./model.onnx --workload throughput -n 10000 --devices &quot;warboy(1)*2&quot; --workers 8 --batch 8
</pre></div>
</div>
<p>지연시간(latency) 벤치마크 예시</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ furiosa-bench ./model.onnx --workload latency -n 10000 --devices &quot;warboy(2)*1&quot;
</pre></div>
</div>
<p>설치는 다음과 같이 APT 패키지 관리자를 통해 설치할 수 있다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apt install furiosa-bench
</pre></div>
</div>
</section>
<section id="furiosa-toolkit">
<h3>furiosa-toolkit 개선<a class="headerlink" href="#furiosa-toolkit" title="이 제목에 대한 퍼머링크"></a></h3>
<p>furiosa-toolkit은 NPU 관리 및 상태 모니터링 기능을 제공하는 명령행 도구의 집합이다.
이번 릴리스에 포함된 도구들은 다음 주요 개선 내용을 포함한다.</p>
<p><strong>furiosactl의 출력 포맷 추가</strong></p>
<p>이전까지는 <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code> 등의 서브 커맨드 실행 시 아스키를 이용한 표 형식으로 내용을 출력하고 있었다.
이번 릴리스에는 <code class="docutils literal notranslate"><span class="pre">--format</span></code> 옵션을 통해 <code class="docutils literal notranslate"><span class="pre">json</span></code>, <code class="docutils literal notranslate"><span class="pre">yaml</span></code> 과 같은 구조적 데이터로 출력하는 기능이 추가되었다.
따라서 사용자는 출력 결과를 파일로 저장하거나 파이프라인을 통해 다른 도구 또는 스크립트로 전달하여 다양한 방식으로 활용할 수 있다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ furiosactl info --format json
[{&quot;dev_name&quot;:&quot;npu7&quot;,&quot;product_name&quot;:&quot;warboy&quot;,&quot;device_uuid&quot;:&quot;&lt;device_uuid&gt;&quot;,&quot;device_sn&quot;:&quot;&lt;device_sn&gt;&quot;,&quot;firmware&quot;:&quot;1.6.0, 7a3b908&quot;,&quot;temperature&quot;:&quot;47°C&quot;,&quot;power&quot;:&quot;0.99 W&quot;,&quot;pci_bdf&quot;:&quot;0000:d6:00.0&quot;,&quot;pci_dev&quot;:&quot;492:0&quot;}]

$ furiosactl info --format yaml
- dev_name: npu7
  product_name: warboy
  device_uuid: &lt;device_uuid&gt;
  device_sn: &lt;device_sn&gt;
  firmware: 1.6.0, 7a3b908
  temperature: 47°C
  power: 0.98 W
  pci_bdf: 0000:d6:00.0
  pci_dev: 492:0
</pre></div>
</div>
<p>또한 <code class="docutils literal notranslate"><span class="pre">info</span></code> 서브 커맨드에 추가/개선된 사항이 있다.</p>
<ul class="simple">
<li><p>NPU 클럭 속도(Clock Frequency) 항목을 추가하였다.</p></li>
<li><p>PCI 카드 전체에서 사용하는 전력(power)을 표시하도록 개선하였다.</p></li>
</ul>
<p><strong>furiosa-npu-metrics-exporter 개선</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">furiosa-npu-metrics-exporter</span></code> 커맨드는 NPU의 성능 및 상태
지표들을 <a class="reference external" href="https://github.com/OpenObservability/OpenMetrics/blob/main/specification/OpenMetrics.md">OpenMetrics</a>
형식으로 서빙하는 웹서버이다. 이 지표들은 Prometheus 를 비롯한 OpenMetrics 호환 수집 도구를 통해 수집할 수 있다.</p>
<p>0.10.0 릴리스에 포함된 버전은 NPU의 클럭 속도(Clock Frequency)와 NPU 사용률(NPU Utialization)을
출력 지표로 포함하도록 개선되었다. NPU 사용률 기능은 아직 실험적인 기능으로 아래와 같이 <code class="docutils literal notranslate"><span class="pre">--enable-npu-utilization</span></code>
옵션을 통해 활성화해야 한다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">furiosa</span><span class="o">-</span><span class="n">npu</span><span class="o">-</span><span class="n">metrics</span><span class="o">-</span><span class="n">exporter</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">npu</span><span class="o">-</span><span class="n">utilization</span>
</pre></div>
</div>
<p>또한, 기존에는 도커 이미지를 통해서만 제공되었던 <code class="docutils literal notranslate"><span class="pre">furiosa-npu-metrics-exporter</span></code> 명령행 도구는
이번 릴리스부터는 <code class="docutils literal notranslate"><span class="pre">furiosa-toolkit</span></code> 패키지에 포함되어 다음과 같이 APT 패키지 관리자 설치할 수 있도록 개선되었다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span> <span class="n">install</span> <span class="n">furiosa</span><span class="o">-</span><span class="n">toolkit</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../software/references.html" class="btn btn-neutral float-left" title="레퍼런스 문서" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="0.9.0.html" class="btn btn-neutral float-right" title="Release Notes - 0.9.0" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 저작권 2023, FuriosaAI, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>