<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Release Notes - 0.7.0 &mdash; Furiosa SDK Documentation 0.10.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Release Notes - 0.6.0" href="0.6.0.html" />
    <link rel="prev" title="Release Notes - 0.8.0" href="0.8.0.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Furiosa SDK Documentation
          </a>
              <div class="version">
                0.10.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">FuriosaAI NPU</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../npu/intro.html">FuriosaAI NPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../npu/intro.html#furiosaai-warboy">FuriosaAI Warboy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../npu/supported_operators.html">List of Supported Operators for NPU Acceleration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FuriosaAI Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../software/intro.html">FuriosaAI SW Stack Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/installation.html">Driver, Firmware, and Runtime Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/python-sdk.html">Python SDK installation and user guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/c-sdk.html">C SDK installation and user guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/cli.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/compiler.html">Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/quantization.html">Model Quantization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/profiler.html">Performance Profiling</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/furiosa-models/latest/">FuriosaAI Model Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/serving.html">Model Server (Serving Framework)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/kubernetes_support.html">Kubernetes Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/tutorials.html">Tutorial and Code Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/references.html">References</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Notes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="0.9.0.html">Release Notes - 0.9.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="0.8.0.html">Release Notes - 0.8.0</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Release Notes - 0.7.0</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to-upgrade">How to upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-changes">Key changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compiler-more-npu-acceleration-supports">Compiler - More NPU acceleration supports</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler-compiler-cache">Compiler - Compiler Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler-compiler-hint">Compiler - Compiler Hint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-profiling-tools">Performance Profiling Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#improvements-bug-fixes-of-python-sdk">Improvements/Bug fixes of Python SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="#improvements-bug-fixes-of-quantization-tools">Improvements/Bug fixes of Quantization tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-plugin-configuration-file-support">Device Plugin - Configuration file support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="0.6.0.html">Release Notes - 0.6.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="0.5.0.html">Release Notes - 0.5.0</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Customer Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.atlassian.net/servicedesk/customer/portals/">FuriosaAI Customer Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customer-support/bugs.html">Bug Report</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Previous Documents</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.8.0/en/">v0.8.0</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.6.0/en/">v0.6.0</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.5.0/en/">v0.5.0</a></li>
<li class="toctree-l1"><a class="reference external" href="https://furiosa-ai.github.io/docs/v0.2.0/en/">v0.2.0</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Furiosa SDK Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Release Notes - 0.7.0</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/releases/0.7.0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="release-notes-0-7-0">
<h1>Release Notes - 0.7.0<a class="headerlink" href="#release-notes-0-7-0" title="Permalink to this heading"></a></h1>
<p>Furiosa SDK 0.7.0 is a major release, and includes approximately 1,400 commits towards performance enhancement, added functions, and bug fixes.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">component version information</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 80%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Package name</p></th>
<th class="head"><p>Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NPU Driver</p></td>
<td><p>1.3.0</p></td>
</tr>
<tr class="row-odd"><td><p>HAL (Hardware Abstraction Layer)</p></td>
<td><p>0.8.0</p></td>
</tr>
<tr class="row-even"><td><p>Furiosa Compiler</p></td>
<td><p>0.7.0</p></td>
</tr>
<tr class="row-odd"><td><p>Python SDK (furiosa-runtime, furiosa-server, furiosa-serving, furiosa-quantizer, ..)</p></td>
<td><p>0.7.0</p></td>
</tr>
<tr class="row-even"><td><p>NPU Device Plugin</p></td>
<td><p>0.10.0</p></td>
</tr>
<tr class="row-odd"><td><p>NPU Feature Discovery</p></td>
<td><p>0.1.0</p></td>
</tr>
<tr class="row-even"><td><p>NPU Management CLI (furiosactl)</p></td>
<td><p>0.9.1</p></td>
</tr>
</tbody>
</table>
<section id="how-to-upgrade">
<h2>How to upgrade<a class="headerlink" href="#how-to-upgrade" title="Permalink to this heading"></a></h2>
<p>The upgrade is a simple process if you are using an APT repository.
Detailed information on APT repository setting and installation can be found in <a class="reference internal" href="../software/installation.html#requiredpackages"><span class="std std-ref">Driver, Firmware, and Runtime Installation</span></a>.</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>furiosa-driver-pdma<span class="w"> </span>furiosa-libnux

pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>furiosa-sdk
</pre></div>
</div>
</div></blockquote>
</section>
<section id="key-changes">
<h2>Key changes<a class="headerlink" href="#key-changes" title="Permalink to this heading"></a></h2>
<section id="compiler-more-npu-acceleration-supports">
<h3>Compiler - More NPU acceleration supports<a class="headerlink" href="#compiler-more-npu-acceleration-supports" title="Permalink to this heading"></a></h3>
<p>Through improvements in the compiler, more operators can be accelerated in various use cases.
Accelerated operators with its condition adopted by 0.7.0 release are following.
You can find the entire list of accelerated operators at <a class="reference internal" href="../npu/supported_operators.html#supportedoperators"><span class="std std-ref">List of Supported Operators for NPU Acceleration</span></a>.</p>
<blockquote>
<div><ul class="simple">
<li><p>Added Linear and Nearest mode support for the Resize operator</p></li>
<li><p>Added DCR mode support for the SpaceToDepth operator</p></li>
<li><p>Added DCR mode support for the DepthToSpace operator</p></li>
<li><p>Added CHW axis support for the Pad operator</p></li>
<li><p>Added C axis support for the Slice operator</p></li>
<li><p>Added acceleration support for operators Tanh, Exp, and Log</p></li>
<li><p>Added C axis support for the Concat operator</p></li>
<li><p>Increased Dilation support to up to x12</p></li>
<li><p>Added acceleration support for operators Gelu, Erf, and Elu</p></li>
</ul>
</div></blockquote>
</section>
<section id="compiler-compiler-cache">
<h3>Compiler - Compiler Cache<a class="headerlink" href="#compiler-compiler-cache" title="Permalink to this heading"></a></h3>
<p>Compiler cache stores the compiled binary into a cache directory, and reuses the cache when the same model is compiled.
Also, you can also use Redis as the compiler cache storage.
More detailed instructions can be found in <a class="reference internal" href="../software/compiler.html#compilercache"><span class="std std-ref">Compiler Cache</span></a>.</p>
</section>
<section id="compiler-compiler-hint">
<h3>Compiler - Compiler Hint<a class="headerlink" href="#compiler-compiler-hint" title="Permalink to this heading"></a></h3>
<p>When running a function that includes compilation,
such as <code class="docutils literal notranslate"><span class="pre">session.create()</span></code>, a path that includes the compilation log is printed as follows.</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Saving<span class="w"> </span>the<span class="w"> </span>compilation<span class="w"> </span>log<span class="w"> </span>into<span class="w"> </span>/home/furiosa/.local/state/furiosa/logs/compile-20211121223028-l5w4g6.log
</pre></div>
</div>
</div></blockquote>
<p>Since 0.7.0, compilation logs contain compilation hints more helpful to understand the compilation process
and give some optimization opportunities.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">&lt;log</span> <span class="pre">file&gt;</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">Hint</span></code> command will show you only hint from the log.
The hint informs why certain operators are not accelerated as shown in the below example.</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>/home/furiosa/.local/state/furiosa/logs/compile-20211121223028-l5w4g6.log<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Hint
<span class="m">2022</span>-05-24T02:44:11.399402Z<span class="w">  </span>WARN<span class="w"> </span>nux::session:<span class="w"> </span>Hint<span class="w"> </span><span class="o">[</span><span class="m">19</span><span class="o">]</span>:<span class="w"> </span><span class="s1">&#39;LogSoftmax&#39;</span><span class="w"> </span>cannot<span class="w"> </span>be<span class="w"> </span>accelerated<span class="w"> </span>yet
<span class="m">2022</span>-05-24T02:44:11.399407Z<span class="w">  </span>WARN<span class="w"> </span>nux::session:<span class="w"> </span>Hint<span class="w"> </span><span class="o">[</span><span class="m">12</span><span class="o">]</span>:<span class="w"> </span>groups<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>bigger<span class="w"> </span>than<span class="w"> </span><span class="m">1</span>
<span class="m">2022</span>-05-24T02:44:11.399408Z<span class="w">  </span>WARN<span class="w"> </span>nux::session:<span class="w"> </span>Hint<span class="w"> </span><span class="o">[</span><span class="m">17</span><span class="o">]</span>:<span class="w"> </span>Softmax<span class="w"> </span>with<span class="w"> </span>large<span class="w"> </span>batch<span class="w"> </span><span class="o">(</span><span class="m">36</span><span class="w"> </span>&gt;<span class="w"> </span><span class="m">2</span><span class="o">)</span><span class="w"> </span>cannot<span class="w"> </span>be<span class="w"> </span>accelerated<span class="w"> </span>by<span class="w"> </span>Warboy
</pre></div>
</div>
</div></blockquote>
</section>
<section id="performance-profiling-tools">
<h3>Performance Profiling Tools<a class="headerlink" href="#performance-profiling-tools" title="Permalink to this heading"></a></h3>
<p>The profiler had been an experimental and closed-beta feature. The release 0.7.0 includes the performance profiler
by default. It allow users to view the time taken in each step in the model inference process.
You can activate the profiler through a shell environment variable or a profiler context in your Python code.</p>
<p>More details can be found in <a class="reference internal" href="../software/profiler.html#profiling"><span class="std std-ref">Performance Profiling</span></a>.</p>
<a class="with-shadow reference internal image-reference" href="../_images/tracing.png"><img alt="Tracing" class="with-shadow align-center" src="../_images/tracing.png" style="width: 600px;" /></a>
<p></p>
</section>
<section id="improvements-bug-fixes-of-python-sdk">
<h3>Improvements/Bug fixes of Python SDK<a class="headerlink" href="#improvements-bug-fixes-of-python-sdk" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Since 0.7.0, <code class="docutils literal notranslate"><span class="pre">session.create()</span></code> and <code class="docutils literal notranslate"><span class="pre">session.create_async()</span></code> can take the batch size.</p></li>
<li><p>Fixed a bug that compiler options passed to <code class="docutils literal notranslate"><span class="pre">session.create()</span></code> and <code class="docutils literal notranslate"><span class="pre">session.create_async()</span></code> wasn’t effective.</p></li>
</ul>
<p>Below is an example that uses batch size and compiler option.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;without_quantize&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;input_min&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;input_max&quot;</span><span class="p">:</span> <span class="mf">255.0</span><span class="p">,</span> <span class="s2">&quot;permute&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]}]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;model.onnx&quot;</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">compile_config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span> <span class="k">as</span> <span class="n">sess</span><span class="p">:</span>
  <span class="n">outputs</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="improvements-bug-fixes-of-quantization-tools">
<h3>Improvements/Bug fixes of Quantization tools<a class="headerlink" href="#improvements-bug-fixes-of-quantization-tools" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>You can now infer published tensor shapes even if <cite>axes</cite> property is not designated in ONNX Squeeze operators below version OpSet 12</p></li>
<li><p>Added support not just for Conv receiving tensors with NxCxHxW shapes as input, but also for Conv receiving tensors with NxCxD shapes</p></li>
<li><p>Modified “Conv - BatchNormalization” subgraph to be fused to Conv even when Conv does not receive bias as input</p></li>
<li><p>Modified to always quantize Sub, Concat, and Pow operators in QDQ format, regardless of whether operands have initial values, so that the model can be processed in a consistent way in the post-quantization process</p></li>
<li><p>Modified to prevent ONNX Runtime related warnings in the quantization process and the result model</p></li>
<li><p>Reinforced the inspection condition to not miss any cases where tensor shape information cannot be inferred</p></li>
<li><p>Modified to allow random calibration not only for models that receive float32 data as inputs, but also for models that receive other decimal or integer types as inputs</p></li>
<li><p>Modified to find and terminate in a stable manner when given an already quantized model</p></li>
<li><p>Modified to adjust scale of weight appropriately if Conv data input or scale of weight is too small, such that scale of bias becomes 0</p></li>
<li><p>Reinforced conditions for “Gather - MatMul” subgraph to be fused into Gather</p></li>
<li><p>Dependent libraries updated to latest version</p></li>
</ul>
</section>
<section id="device-plugin-configuration-file-support">
<h3>Device Plugin - Configuration file support<a class="headerlink" href="#device-plugin-configuration-file-support" title="Permalink to this heading"></a></h3>
<p>A function to set the execution option of the NPU Device Plugin used in Kubernetes with a file has been added. As before, option items can be entered as command-line arguments, or options can be specified by selecting a configuration file. Detailed instructions can be found in <a class="reference internal" href="../software/kubernetes_support.html#kubernetesintegration"><span class="std std-ref">Kubernetes Support</span></a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="0.8.0.html" class="btn btn-neutral float-left" title="Release Notes - 0.8.0" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="0.6.0.html" class="btn btn-neutral float-right" title="Release Notes - 0.6.0" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 FuriosaAI, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>